% !TEX root = MAIN.tex

\chapter{Software Unit and Integration Test Case Specification}
\label{chap:spec}

\section{General}

The \FAQAS unit test suite covers the source code mutation component. In particular, it provides one test case for each of the mutation operators of the \FAQAS. Table~\ref{table:operators} shows the complete list of mutation operators.

The set of \FAQAS mutation operators is composed of the following: Absolute Value Insertion (ABS), Arithmetic Operator Replacement (AOR), Integer Constraint Replacement (ICR), Logical Connector Replacement (LCR), Relational Operator Replacement (ROR), Unary Operator Insertion (UOI), Statement Deletion Operator (SDL), and Literal Value Replacement (LVR).
It also include OODL mutation operators: delete Arithmetic (AOD), Bitwise (BOD), Logical (LOD), Relational (ROD), and Shift (SOD) operators.

\input{tables/operators}


\section{Organization of the Test Cases}

Test cases are identified using the name of the operator acronym and the input type to be processed, for example the test case \texttt{ror\_lt.sh} represents the ROR operator for the ``less than'' input.

The purpose of each test case is to verify that the component produces the expected results according to the SDD, that is, the corresponding syntactically altered version of the software according to operators defined in Table~\ref{table:operators}. 
Note that a mutation operator might produce one or more mutants for a single input, all outputs shall be as expected.

\begin{lstlisting}[language=C, label=test_source, caption=C function example.]
double function() {
int a = 4, b = 5;
return a / b;
}
\end{lstlisting}

\begin{lstlisting}[language=bash, label=test_example, caption=ABS test case example.]
$MUTATOR --compilation "$FILE -o test" --operators ABS

EXPECTED="double function() {\ndouble a = 3;\nreturn -(a);\n}"

tst=`diff test.mut.3.1_1_8.ABS.function.c <(echo -e $EXPECTED) | wc -l`

if [ $tst -eq 0 ];then
    echo -e "TEST abs_val PASSED"
else
    echo -e "TEST abs_val FAILED"
fi
\end{lstlisting}


Listings~\ref{test_source} and~\ref{test_example} introduces an example of source code and test case for the mutation operator ABS, respectively. As shown in Listing~\ref{test_example}, each test case (i) invokes the mutator component selecting the corresponding operator acronym, (ii) defines the expected output for operator, (iii) checks if there are differences between the actual output of the component and the expected output.

All test cases are independent from each other; therefore there is no need of executing tests in a defined order.


Table~\ref{table:matrix} introduces the complete list of unit test cases that covers all the mutation operators of \FAQAS. Note that the mutator shall generate one mutant for each element of the replacement column.

\input{tables/matrix}

