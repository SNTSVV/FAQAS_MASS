% !TEX root = MAIN.tex

\chapter{FAQAS case studies}
\label{chapter:caseStudies}
 

\STARTCHANGEDFINAL
The FAQAS toolset has been applied to \MREVISION{C-P-40}{six} case study systems:
ESAIL, \GCSP{}, \PARAM{}, \UTIL{}, MLFS, ASN1SCC.

 
\INDEX{ESAIL} is a microsatellite developed by LXS in a Public-Private-Partnership with ESA and ExactEarth. For our empirical evaluation, we considered the onboard control software of \SAIL{} (hereafter, simply \SAIL{}\emph{-CSW}), which consists of 924 source files with a total size of 187,116 LOC. 
\SAIL{}\emph{-CSW} is verified by unit test suites and system test suites that run in different facilities (e.g., Software Validation Facility~\cite{Isasi2019}, FlatSat~\cite{Eickhoff:Simulate}, Protoflight Model~\cite{ecssHB10A}). We focus on the unit test suite and the SVF test suite because the other test suites require dedicated hardware.  
To address some of our research questions, all the mutants must be executed against the test suite, which is not feasible for the case of \SAIL{}\emph{-CSW} due to its large size and test suite. For this reason, we have identified a subsystem of \SAIL{}\emph{-CSW} (hereafter, \emph{\SAIL{}}$_{S}$) that consists of a set of files, selected by \TWO engineers, that are representative of the different functionalities in \SAIL{}\emph{-CSW}: service/protocol layer functions, critical functions of the satellite implemented in high-level drivers, application layer functions.

\INDEX{\GCSP{}}, \INDEX{\PARAM{}}, and \INDEX{\UTIL{}}  are utility libraries developed by \ONE.
\emph{\GCSP{}} is a network protocol library including low-level drivers (e.g., CAN, I2C).
%an extension of \OPENCSP{}; it provides convenience wrapping of \CSP functionality,
%definition of standard \CSP ports, and low-level drivers (e.g., CAN, I2C).
{\PARAM{}} is a light-weight parameter system designed for \ONE satellite subsystems. 
{\UTIL{}} is a utility library providing cross-platform APIs for use in both embedded systems and Linux development environments.



The \INDEX{Mathematical Library for Flight Software}\footnote{https://essr.esa.int/project/mlfs-mathematical-library-for-flight-software} (MLFS) implements mathematical functions ready for qualification. 
%\DONE{Please rewrite the following sentence}
MLFS is born from the need of having a mathematical library ready for qualification for flight software. 
In FAQAS, we considered the unit test suite of MLFS (it achieves branch and MC/DC coverage).

\INDEX{ASN1SCC}\footnote{https://github.com/ttsiodras/asn1scc} is an open source ASN.1 compiler that generates C/C++ and SPARK/Ada code suitable for low resource environments such as space systems. Moreover, the compiler can produce a test harness that provides full statement coverage in the generated code, and therefore significantly improves its quality. In the context of FAQAS, we focus our analysis on the source code automatically generated by the ASN.1 compiler, rather than in ASN1SCC software itself. 

Except for \SAIL{}\emph{-CSW}, all subjects
are compiled to generate executables for the development environment OS (Linux); we rely on the Gnu Compiler Collection (GCC)  for Linux X86~\cite{GCC} versions 5.3 and 6.3 for \MLFS{}{} and ONE, respectively. \SAIL{}\emph{-CSW} is compiled with the
LEON/ERC32 RTEMS Cross Compilation System, which includes the GCC C/C++ compiler version 4.4.6 for  RTEMS-4.8 (Sparc architecture)~\cite{RTEMS}.



Table~\ref{table:caseStudies:figures} provides additional details about each case study.


For the validation of each tool in the FAQAS toolset, we selected case studies presenting characteristics compatible with the requirements of the tool under test. Table~\ref{tab:caseStudies} provides the list of case studies along with an indication of the type of mutation analysis/testing (i.e., code-driven or data-driven) and the tools they are targeted for.  \emph{Code-driven mutation analysis} (implemented by MASS) does not present any specific requirement except the availability of source code; for this reason, it has been validated with all the available case studies systems.
\emph{Code-driven mutation testing} (implemented by SEMuS), instead, requires the software under test to be comprised of components communicating through function calls (e.g., not network channels); for this reason, for SEMuS, we selected unit test suites.
\emph{Data-driven mutation analysis} (implemented by DAMAt) targets components communicating through channels, which are usually tested with integration and system test suites. For this reason we selected systems tested with such types of test suites.
\emph{Data-driven mutation testing} (implemented by DAMTE) aims to generate test cases that improve data-driven mutation analysis; however, since it is performed with symbolic execution tools, it presents the same limitations of SEMuS, that is, the analyzed part of the software under test should be comprised of components communicating through function calls. For this reason, it can target only libGCSP and libParam. We selected libParam because it is a higher-level library and thus more representative for this specific case.

\begin{table}[tb]
\caption{Overview of subject artefacts.}
\label{table:caseStudies:figures} 
\scriptsize
\centering
\begin{tabular}{|
@{\hspace{1pt}}p{13mm}
@{\hspace{2pt}}|
@{\hspace{1pt}}>{\raggedleft\arraybackslash}p{8mm}@{\hspace{1pt}}|
@{\hspace{1pt}}>{\raggedleft\arraybackslash}p{18mm}@{\hspace{1pt}}|
@{\hspace{1pt}}>{\raggedleft\arraybackslash}p{20mm}@{\hspace{1pt}}|
@{\hspace{1pt}}>{\raggedleft\arraybackslash}p{24mm}@{\hspace{1pt}}|
p{20mm}|}
\hline
\textbf{Subject}&\textbf{LOC}&\textbf{Test suite type}&\textbf{\# Test cases}&\textbf{Statement} \textbf{coverage}\\
\hline
\mbox{\SAIL{}\emph{-CSW}}& 74,155 & System& 384 & 90.38\% \\
\SAIL{}$_S$& 2,235 & System& 384 & 95.36\%\\
%ESAIL execution time: 8.3 hours
\GCSP{}& 9,836 & Integration& 89 & 63.10\%\\
%LIBCSP execution time: 107 seconds
\PARAM{}& 3,179 & Integration& 170 & 77.60\%\\
%LIBPARAM execution time: 50 seconds
\UTIL{}& 10,576 & Unit& 201 & 83.20\%\\
%LIBUTIL execution time: 67 seconds
\MLFS{}{}& 5,402 & Unit& 4042 & 100.00\%\\
ASN1CC& 4,338 & Unit& 107 & 99.13\%\\
%MLFS execution time: 313 seconds (5.2 minutes)
%\MLFS{}{}$_V$& 5402 & 4042 & 100.00\%\\
\hline
\end{tabular}

\end{table}

\begin{table}[htp]
\caption{Case studies for the FAQAS activity.}
\label{tab:caseStudies}
\begin{center}
\begin{tabular}{|p{1.2cm}|p{6cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|}
\hline
\textbf{}&\textbf{}&\multicolumn{2}{c}{\textbf{Code-driven}}&\multicolumn{2}{c|}{\textbf{Data-driven}}\\
\textbf{Partner}&\textbf{Case study}&\textbf{MASS}&\textbf{SEMuS}&\textbf{DAMAt}&\textbf{DaMTe}\\
\hline
LXS&System Test Suite for ESAIL&Y&N&Y&N\\
LXS&Unit Test Suite for ESAIL&Y&Y&N&N\\
GSL&Unit Test Suite for libUtil&Y&Y&N&N\\
GSL&Integration Test Suite for libgscsp&Y&N&Y&N\\
GSL&System Test Suite for libparam&Y&N&Y&Y\\
ESA&MLFS mathematical library&Y&Y&N&N\\
ESA&ASN1 Compiler&Y&Y&N&N\\
\hline
\end{tabular}
\end{center}
%An asterisk (*) is used to indicate validation cases that will be finalized in WP4.
\end{table}

\ENDCHANGEDFINAL

\clearpage

\input{caseStudies_LXS.tex}

\input{caseStudies_GSL.tex}


\input{caseStudies_MLSF.tex}

\input{caseStudies_ASN1.tex}

